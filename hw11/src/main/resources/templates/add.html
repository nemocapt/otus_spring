<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>Правка книги</title>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
</head>
<body>


<script>
    function save() {
        let book = {
            authorId: $("#author-id-input").val(),
            genre: $("#genre-input").val(),
            title: $("#title-input").val()
        }
        $.ajax({
            url: "/api/book",
            type: 'PUT',
            dataType: "json",
            contentType: "application/json",
            data: JSON.stringify(book),
            success: function (result) {
                location.assign("/");
            }
        });
    }

    function showForm() {
        $('body').append(`
                        <h1>Добавить книгу:</h1>
                        <form id="edit-form" action="" >
                        <div class="row">
                            <label for="author-id-input">Author ID:</label>
                            <input id="author-id-input" name="authorId" type="text" value=""/>
                        </div>
                        <div class="row">
                            <label for="genre-input">Genre:</label>
                            <input id="genre-input" name="genre" type="text" value=""/>
                        </div>
                        <div class="row">
                            <label for="title-input">Title:</label>
                            <input id="title-input" name="title" type="text" value=""/>
                        </div>

                    </form>

                        <div class="row">
                            <button id="submit" type="submit" onclick="save();">save</button>
                        </div>
                `)
    }

    $(function () {
        showForm()
    });
</script>

</body>
</html>
